<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
	<title>IJsselsteinloop</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
	  body, html {
		margin: 0;
		padding: 0;
		font-family: Arial, sans-serif;
	  }

	  #map {
		height: 400px; /* Adjusted for mobile devices */
		width: 100%;
	  }

	  .button-container {
		text-align: center; /* Center buttons on mobile */
		padding: 10px;
	  }

	  .route-button {
		padding: 10px 20px; /* Larger touch area */
		margin: 5px; /* Add space around buttons */
		font-size: 16px; /* Larger text for readability */
	  }

	  /* Responsive adjustments */
	  @media (min-width: 600px) {
		.route-button {
		  padding: 5px 10px;
		  font-size: 14px;
		}
	  }
	</style>

	<style>
        #map { height: 100vh; width: 100%; }
		
		.button-container {
			position: absolute;
			top: 10px;
			right: 10px;
			z-index: 1000;
			background: white;
			padding: 5px;
			border-radius: 5px;
			box-shadow: 0 2px 4px rgba(0,0,0,0.2);
			display: flex;
			flex-direction: column;
			align-items: center; /* Keeps items centered */
			width: auto; /* Adjust based on content, or set a specific width */
		}

		.route-button { 
			display: block;
			margin-bottom: 1px;
			width: 100%; /* Make buttons fill the container */
			cursor: pointer;
			transition: background-color 0.1s ease;
			text-align: center; /* Ensure text is centered */
			padding: 6px 12px; /* Adjust padding */
			box-sizing: border-box; /* Ensures padding is included in the width calculation */
		}

		/* Ensure container is wide enough for all buttons */
		.button-container {
			width: max-content; /* Adjust the width to the content's maximum width */
			min-width: 120px; /* Adjust this based on your content's needs */
		}


		/* Adjust the last button's margin-bottom to 0 to remove extra space */
		.route-button:last-child {
			margin-bottom: 0;
		}

        .route-button:hover {
            background-color: #f0f0f0; /* Slight change on hover to indicate interactivity */
        }
		
		.water-station-always {
			font-size: 24px; /* Size of the drop icon */
			color: #007bff; /* Color for the drop icon */
			line-height: 1; /* Adjust line height to prevent extra vertical space */
		}

		/* Additional style to ensure the icon is centered correctly */
		.icon-drop {
			display: block; /* Ensure the emoji/icon is centered if adjusting separately */
		}

		
		.water-station-warm {
			display: inline-block;
			position: relative;
			width: 30px; /* Match iconSize width */
			height: 30px; /* Match iconSize height */
			font-size: 0; /* Remove default font size */
		}
		.icon-sun {
			font-size: 20px; /* Larger sun */
			position: absolute;
			top: 0;
			left: 50%;
			transform: translateX(-50%);
		}
		.icon-drop {
			font-size: 16px; /* Smaller drop */
			position: absolute;
			bottom: 0;
			left: 50%;
			transform: translateX(-50%);
		}
		
		.text-label {
			text-align: center; /* Centered text */
			font-size: 14px;
			font-weight: bold;
			color: #222;
			white-space: nowrap;
			display: block; /* Use block to center align */
			transform: translate(-50%, -50%); /* Center the label */
			background: rgba(255, 255, 255, 0.9); /* White opaque background */
			border-radius: 50%; /* Rounded corners for circle shape */
			width: 24px; /* Width of the circle */
			height: 24px; /* Height of the circle */
			line-height: 24px; /* Aligns text vertically within the circle */
			padding: 0; /* Padding 0 works well with line-height for circles */
	}
    </style>
</head>
<body>

<div class="button-container">
    <button id="btn5km" class="route-button">5 KM</button>
    <button id="btn10km" class="route-button">10 KM</button>
    <button id="btnHalveMarathon" class="route-button">Halve Marathon</button>
</div>

<div id="map"></div>

<script>
  var map = L.map('map').setView([52.017676, 5.0411685], 13);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);


  var currentLayer;
  
  var waterStationsLayer = L.layerGroup().addTo(map);
  // Water Stations Data
  var waterStationsData = [
	{ coordinates: [52.006654916481175, 4.966708032893907], label: "Verzorgingspost 1", distances: ["HalveMarathon"], warmWeatherOnly: false },
	{ coordinates: [51.98263377627107, 4.988068471831143], label: "Verzorgingspost 2", distances: ["HalveMarathon"], warmWeatherOnly: false },
	{ coordinates: [51.99738045743968, 5.062511612903955], label: "Verzorgingspost 3", distances: ["10km", "HalveMarathon"], warmWeatherOnly: false },
	{ coordinates: [52.01499933153716, 5.069546429165663], label: "Verzorgingspost 4", distances: ["10km", "HalveMarathon"], warmWeatherOnly: false },
	{ coordinates: [52.01075738888718, 5.060865956135832], label: "Verzorgingspost 5", distances: ["5km"], warmWeatherOnly: false },
	{ coordinates: [52.01899344562391, 5.051269607904697], label: "Verzorgingspost 6", distances: ["5km", "10km", "HalveMarathon"], warmWeatherOnly: false },
	{ coordinates: [52.00312868165483, 5.049627165106732], label: "Verzorgingspost 7 (warm weer)", distances: ["10km"], warmWeatherOnly: true },
	{ coordinates: [51.98763562272562, 4.972714368446658], label: "Verzorgingspost 8 (warm weer)", distances: ["HalveMarathon"], warmWeatherOnly: true }
  ];

  var routesData = {
    "5km": {
      "type": "FeatureCollection",
      "features": [{
        "type": "Feature",
        "properties": { "name": "5km Route"},
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [5.0411685,52.017676],[5.0416188,52.0174411],[5.0421441,52.0172244],[5.0424144,52.017144],[5.0427393,52.0170711],[5.0430445,52.0169917],[5.0438765,52.0166441],[5.0450987,52.016104],[5.0454601,52.0159694],[5.0457212,52.0159152],[5.046708,52.0156831],[5.047258,52.0155116],[5.0477029,52.0153366],[5.0479596,52.0152584],[5.0483276,52.0151645],[5.0484646,52.0151097],[5.0487583,52.0148561],[5.048794,52.0146878],[5.0488743,52.0145866],[5.0490429,52.0145352],[5.0492137,52.0144837],[5.0498151,52.0142198],[5.050177,52.0140214],[5.0504238,52.013859],[5.0505157,52.0138142],[5.0507091,52.013798],[5.0510503,52.0138162],[5.0534367,52.0139473],[5.0560423,52.0140667],[5.056194,52.0140452],[5.0563766,52.0139384],[5.0563634,52.0138518],[5.0556208,52.0134359],[5.0544811,52.0128514],[5.0544341,52.012757],[5.0544605,52.0126357],[5.0547979,52.0122703],[5.0553992,52.0115971],[5.0558077,52.0111567],[5.0560572,52.010901],[5.056409,52.010564],[5.0568166,52.010157],[5.0574252,52.0095738],[5.0576009,52.0094663],[5.0578131,52.0094542],[5.0580281,52.0094975],[5.0587126,52.0097192],[5.058948,52.0098054],[5.0592997,52.0099661],[5.0607402,52.0107278],[5.0608705,52.0108249],[5.0609506,52.0109289],[5.0609851,52.0110707],[5.0610124,52.0113243],[5.0609789,52.0114839],[5.0609035,52.0116194],[5.0607195,52.0117965],[5.0597001,52.0124255],[5.0590089,52.0128556],[5.0576532,52.0138539],[5.0575405,52.0139621],[5.0571114,52.0142492],[5.0570526,52.0143247],[5.0570559,52.0143613],[5.0571102,52.0144087],[5.0572698,52.0145344],[5.0573059,52.0145939],[5.0573164,52.0146452],[5.0572863,52.0149597],[5.0572876,52.0150387],[5.0578821,52.0153304],[5.0580884,52.0153906],[5.0601935,52.0155173],[5.0602568,52.0155216],[5.0603235,52.0155697],[5.0603982,52.0156485],[5.0605568,52.0157063],[5.0608273,52.0158247],[5.0612961,52.0160797],[5.0615905,52.0162375],[5.0619966,52.0164774],[5.0621248,52.0165641],[5.0622507,52.0167097],[5.0630295,52.0176645],[5.0630999,52.0177953],[5.0631507,52.017917],[5.0631499,52.0180305],[5.0631366,52.0181708],[5.0631505,52.0182434],[5.063158,52.0183038],[5.0631384,52.0183191],[5.06306,52.0183061],[5.0624653,52.0181663],[5.0622755,52.018129],[5.0617931,52.0180833],[5.0614962,52.0180867],[5.0610082,52.0181366],[5.0604982,52.0182145],[5.0602398,52.0182678],[5.0598866,52.0183574],[5.0593065,52.0185334],[5.0580932,52.0189458],[5.0578011,52.0190378],[5.0571264,52.0192305],[5.0560549,52.019531],[5.055711,52.0196095],[5.0555473,52.0196317],[5.0554101,52.019636],[5.0552262,52.0196279],[5.0550872,52.0196203],[5.0549641,52.0195997],[5.0547054,52.0195218],[5.0544855,52.0194346],[5.0540668,52.0192581],[5.0538081,52.0191504],[5.0533765,52.0189889],[5.0529501,52.0188845],[5.0528355,52.0188702],[5.0524339,52.0188606],[5.0522397,52.0188712],[5.0518349,52.0189453],[5.0515509,52.0190383],[5.0514734,52.0190429],[5.0512322,52.0189503],[5.050922,52.0189642],[5.0508048,52.0189228],[5.0463526,52.0162227],[5.046195,52.0160881],[5.0461069,52.0159676],[5.0460644,52.0159068],[5.0459961,52.0158853],[5.0457212,52.0159152],[5.0454601,52.0159694],[5.0450987,52.016104],[5.0438765,52.0166441],[5.0430445,52.0169917],[5.0427393,52.0170711],[5.0424144,52.017144],[5.0421441,52.0172244],[5.0416188,52.0174411],[5.0411685,52.017676]
          ]
        }
      }],
      "style": {
          "color": "#ffff00", // Yellow
          "weight": 5,
          "opacity": 0.65
      }
    },
    "10km": {
      "type": "FeatureCollection",
      "features": [{
        "type": "Feature",
        "properties": { "name": "10km Route" },
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [5.0411685,52.017676],[5.0416188,52.0174411],[5.0421441,52.0172244],[5.0424144,52.017144],[5.0427393,52.0170711],[5.0430445,52.0169917],[5.0438765,52.0166441],[5.0450987,52.016104],[5.0454601,52.0159694],[5.0457212,52.0159152],[5.046708,52.0156831],[5.047258,52.0155116],[5.0477029,52.0153366],[5.0479596,52.0152584],[5.0483656,52.0151739],[5.0486557,52.0150349],[5.0488608,52.0149287],[5.0489683,52.0149145],[5.0490708,52.0149391],[5.0491173,52.0149656],[5.0492643,52.0151409],[5.0494582,52.0152666],[5.0499361,52.015523],[5.0502678,52.0157172],[5.0513196,52.016389],[5.051661,52.0166787],[5.0519897,52.0170466],[5.0522565,52.0175231],[5.0523906,52.0177747],[5.052445,52.017836],[5.0526227,52.0178691],[5.0529117,52.0178337],[5.0535514,52.0176381],[5.0537277,52.0176217],[5.0539268,52.0176923],[5.054277,52.017918],[5.0544091,52.0179919],[5.0544835,52.0180072],[5.0545672,52.0179884],[5.0547138,52.0179018],[5.0551946,52.0175384],[5.0554206,52.0173231],[5.0555364,52.0171762],[5.0556911,52.0169428],[5.0558035,52.0166758],[5.0559018,52.0164259],[5.0560669,52.0160067],[5.0562388,52.0155254],[5.0562936,52.0154068],[5.0563828,52.0153309],[5.0564899,52.0153156],[5.0571446,52.0153419],[5.0572008,52.0153322],[5.0572284,52.0152848],[5.0572698,52.0149572],[5.057311,52.0146219],[5.0572827,52.0145573],[5.0572135,52.0144785],[5.0570583,52.0143628],[5.057011,52.0142418],[5.0569561,52.014153],[5.0568044,52.0140606],[5.0556208,52.0134359],[5.0543294,52.0127736],[5.0537709,52.012569],[5.0527014,52.0122699],[5.0521244,52.0121018],[5.0520335,52.0120429],[5.0519967,52.0119453],[5.0520475,52.0117921],[5.052117,52.0115077],[5.0521758,52.0112052],[5.0521612,52.0110374],[5.0520692,52.0107882],[5.0519715,52.0105976],[5.0516687,52.0097373],[5.05148,52.0091694],[5.0512455,52.0086941],[5.0511186,52.0084351],[5.0510324,52.0081707],[5.0508621,52.0076487],[5.0507073,52.0073026],[5.0505897,52.0069063],[5.0504647,52.0063552],[5.0502745,52.0056275],[5.0500228,52.0047426],[5.0496152,52.0032534],[5.0493275,52.00224],[5.0489929,52.0011596],[5.048897,52.000844],[5.0488745,52.0006807],[5.0489271,52.0005479],[5.0501465,51.9995351],[5.0520225,51.9980835],[5.053904,51.9965156],[5.0540721,51.9964681],[5.0541535,51.9964654],[5.054221,51.9965202],[5.0542981,51.9965852],[5.0543668,51.9966891],[5.0544802,51.9969448],[5.0545216,51.9969632],[5.0602915,51.9967143],[5.0609917,51.9966852],[5.0621493,51.9966456],[5.0624038,51.9966442],[5.0625085,51.9966615],[5.0625648,51.9967233],[5.0625317,51.9972111],[5.0625473,51.997309],[5.0623113,51.9974746],[5.0617367,51.9978859],[5.0614398,51.9980975],[5.0612707,51.9982498],[5.061125,51.9984529],[5.0610632,51.9986188],[5.0610343,51.9987906],[5.0610151,51.9989996],[5.0609917,51.9991486],[5.0609354,51.9993382],[5.0607484,51.9996521],[5.0605931,51.9998738],[5.0605092,52.0000059],[5.0604653,52.0001379],[5.0603457,52.0008216],[5.0603292,52.0011652],[5.060347,52.0017508],[5.0603314,52.0019133],[5.0602927,52.0021976],[5.0601807,52.0024853],[5.0601615,52.0025877],[5.0601928,52.0027314],[5.0602548,52.0029112],[5.060358,52.0030785],[5.0608972,52.0038559],[5.0611416,52.0041438],[5.0615524,52.0045457],[5.0618235,52.0047834],[5.0620323,52.0049295],[5.0622846,52.0050842],[5.0628936,52.0054256],[5.0640825,52.0061511],[5.064253,52.0062536],[5.064521,52.0064346],[5.0647087,52.0065249],[5.0649408,52.0065952],[5.0651044,52.0066595],[5.0653325,52.0067644],[5.0656693,52.006926],[5.0659181,52.0070208],[5.0663085,52.0071198],[5.0665985,52.0071722],[5.0670026,52.0072298],[5.0673792,52.0072686],[5.0676742,52.0073139],[5.0678611,52.0073694],[5.0682122,52.0075107],[5.0685627,52.0076858],[5.0688789,52.0078694],[5.0691139,52.0080277],[5.0698328,52.0085599],[5.0698939,52.008592],[5.0699613,52.0085991],[5.070017,52.0085794],[5.0705782,52.0082585],[5.0706727,52.0082163],[5.0707895,52.0081842],[5.0709187,52.0081656],[5.0712156,52.0081495],[5.0714259,52.0081343],[5.0720321,52.0080429],[5.0722342,52.0079887],[5.0723634,52.0079507],[5.0724884,52.0079261],[5.073331,52.0079033],[5.0735029,52.0079752],[5.0735139,52.0080031],[5.0733132,52.0083737],[5.0727935,52.0091918],[5.0724735,52.0097709],[5.0721771,52.0102917],[5.0717604,52.0110783],[5.0697958,52.0145406],[5.0692488,52.0154535],[5.0691213,52.0157013],[5.0689985,52.0160091],[5.0689737,52.0161512],[5.0690191,52.0163145],[5.0692857,52.0166715],[5.0693517,52.0168102],[5.0693696,52.0169261],[5.0693352,52.0171376],[5.0692569,52.017355],[5.068982,52.0180114],[5.0688802,52.018096],[5.0680954,52.0183084],[5.0677559,52.0183879],[5.0674067,52.0184471],[5.0662902,52.0185401],[5.0656759,52.0185744],[5.0652184,52.0185797],[5.0643808,52.0185401],[5.0637902,52.0184753],[5.0633585,52.0183669],[5.0632051,52.0183302],[5.06306,52.0183061],[5.0624653,52.0181663],[5.0622755,52.018129],[5.0617931,52.0180833],[5.0614962,52.0180867],[5.0610082,52.0181366],[5.0604982,52.0182145],[5.0602398,52.0182678],[5.0598866,52.0183574],[5.0593065,52.0185334],[5.0580932,52.0189458],[5.0578011,52.0190378],[5.0571264,52.0192305],[5.0560549,52.019531],[5.055711,52.0196095],[5.0555473,52.0196317],[5.0554101,52.019636],[5.0552262,52.0196279],[5.0550872,52.0196203],[5.0549641,52.0195997],[5.0547054,52.0195218],[5.0544855,52.0194346],[5.0540668,52.0192581],[5.0538081,52.0191504],[5.0533765,52.0189889],[5.0529501,52.0188845],[5.0528355,52.0188702],[5.0524339,52.0188606],[5.0522397,52.0188712],[5.0518349,52.0189453],[5.0515509,52.0190383],[5.0514734,52.0190429],[5.0512322,52.0189503],[5.050922,52.0189642],[5.0508048,52.0189228],[5.0463526,52.0162227],[5.046195,52.0160881],[5.0461069,52.0159676],[5.0460644,52.0159068],[5.0459961,52.0158853],[5.0457212,52.0159152],[5.0454601,52.0159694],[5.0450987,52.016104],[5.0438765,52.0166441],[5.0430445,52.0169917],[5.0427393,52.0170711],[5.0424144,52.017144],[5.0421441,52.0172244],[5.0416188,52.0174411],[5.0411685,52.017676]
          ]
        }
      }],
      "style": {
          "color": "#ff0000", // Red
          "weight": 5,
          "opacity": 0.65
      }
    },
    "HalveMarathon": {
      "type": "FeatureCollection",
      "features": [{
        "type": "Feature",
        "properties": { "name": "Halve Marathon Route" },
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [5.0378459,52.0183928],[5.0370209,52.0181947],[5.0348471,52.0176745],[5.0320243,52.0169906],[5.0308559,52.0167022],[5.0270213,52.0157865],[5.0268973,52.0157344],[5.0268063,52.0156187],[5.0268033,52.0155065],[5.0268093,52.0154532],[5.0270402,52.0150381],[5.0270586,52.0149265],[5.0270151,52.0148479],[5.0269087,52.0147974],[5.0266113,52.0147242],[5.0261522,52.0146345],[5.0251643,52.0144971],[5.0239547,52.0143101],[5.0230017,52.0141454],[5.0211984,52.0138482],[5.0191482,52.0135179],[5.0179259,52.0133123],[5.0139575,52.0126791],[5.0117293,52.0122986],[5.0106126,52.0121225],[5.0076016,52.0116203],[5.0061137,52.0113802],[5.0041086,52.0110647],[5.0009582,52.0105317],[4.999595,52.0103117],[4.9993453,52.0102905],[4.9990385,52.0102722],[4.9982964,52.0102861],[4.9978969,52.0102766],[4.9972642,52.0102605],[4.9961923,52.0102835],[4.9955903,52.0102778],[4.994351,52.0102618],[4.9933811,52.0102595],[4.9923183,52.0102252],[4.9917144,52.010192],[4.9910938,52.0101474],[4.9906646,52.0101245],[4.9899214,52.0100868],[4.9891856,52.010041],[4.9869764,52.0098855],[4.9860548,52.0098272],[4.985371,52.0097814],[4.985096,52.009754],[4.9844736,52.0096911],[4.983775,52.0096407],[4.9831506,52.0095813],[4.9823387,52.009468],[4.9811514,52.009253],[4.9796798,52.0089591],[4.9779871,52.008656],[4.9762647,52.0083449],[4.9750718,52.0081482],[4.9743647,52.0080148],[4.9741816,52.007965],[4.9736025,52.0078501],[4.9728997,52.0077374],[4.9724918,52.0076481],[4.9722243,52.0076078],[4.9716437,52.0075203],[4.970607,52.0073312],[4.9695908,52.0071346],[4.9683831,52.0069238],[4.9678431,52.0068201],[4.967245,52.0067325],[4.9665221,52.0066075],[4.9661738,52.006527],[4.9657063,52.0064323],[4.9651612,52.0063267],[4.9642977,52.0061887],[4.963032,52.0059481],[4.9629778,52.0058986],[4.9629859,52.0057999],[4.9630479,52.0056615],[4.9630892,52.0052807],[4.963341,52.0047879],[4.963733,52.0041116],[4.9641982,52.0033794],[4.9646977,52.0025785],[4.964888,52.0021882],[4.9650483,52.0018384],[4.9652014,52.0012533],[4.9653245,52.0005185],[4.9654419,51.9998453],[4.9655206,51.9994999],[4.9656723,51.9990505],[4.9658541,51.998668],[4.9660187,51.9983684],[4.9662806,51.9979507],[4.9666828,51.9973013],[4.9669573,51.9968577],[4.9675502,51.9959143],[4.9678359,51.9955374],[4.9680077,51.995302],[4.9681127,51.9951666],[4.9682931,51.9950122],[4.9685007,51.9948925],[4.9686766,51.994834],[4.9689942,51.9948074],[4.9690734,51.9947847],[4.9691939,51.9946265],[4.9691789,51.9945523],[4.9690787,51.9944597],[4.9688605,51.9942874],[4.9688235,51.9941943],[4.9688775,51.9938301],[4.9689731,51.9936623],[4.9712789,51.9898979],[4.9714824,51.9896854],[4.9715731,51.9896389],[4.9717037,51.9895694],[4.9717559,51.9894916],[4.9717422,51.9894171],[4.9717037,51.9893333],[4.9717215,51.9892537],[4.9717806,51.9890878],[4.9744431,51.9847952],[4.9745765,51.9846208],[4.9748225,51.9843033],[4.9750548,51.9839664],[4.9752431,51.9836227],[4.9754933,51.9831664],[4.9756789,51.9828235],[4.9762685,51.9818474],[4.9768156,51.9809602],[4.9770548,51.9806258],[4.9771276,51.9805165],[4.977272,51.9802355],[4.9773806,51.9800771],[4.9774919,51.9799662],[4.9777201,51.9798866],[4.9779592,51.9798333],[4.9780967,51.9798384],[4.9786548,51.9799747],[4.9788719,51.9800069],[4.9793599,51.9801449],[4.9797489,51.9802651],[4.9802575,51.9804217],[4.9804857,51.9804844],[4.9810534,51.9805902],[4.9813475,51.9806664],[4.9815619,51.9807468],[4.9819358,51.980867],[4.9824774,51.9810177],[4.9833695,51.9812954],[4.9836086,51.9813521],[4.9838684,51.981425],[4.9841406,51.9815139],[4.9845571,51.9816629],[4.9848251,51.9817484],[4.9851426,51.9818347],[4.9855083,51.9819168],[4.9860815,51.9820819],[4.9867247,51.982247],[4.9876581,51.9825213],[4.9882464,51.9827059],[4.9889666,51.9828946],[4.9899261,51.9831342],[4.9901625,51.9831808],[4.9904264,51.9832214],[4.9906835,51.9832697],[4.9914972,51.9834796],[4.9921501,51.9836176],[4.9925542,51.9836828],[4.993302,51.983897],[4.9936071,51.983996],[4.9938435,51.9840604],[4.994025,51.9840959],[4.9946133,51.9841704],[4.9953294,51.9842508],[4.9955975,51.9842737],[4.995647,51.9843347],[4.995647,51.984432],[4.9956841,51.9844726],[4.995805,51.9844972],[4.996003,51.9845158],[4.9961555,51.9844997],[4.9962628,51.9844684],[4.9965074,51.9843228],[4.9967205,51.9841882],[4.9976098,51.983538],[4.9980002,51.9833433],[4.998139,51.9832892],[4.9983191,51.9832595],[4.9985445,51.9831461],[4.9991933,51.982821],[4.9994091,51.9827524],[4.9997046,51.9827016],[4.9998545,51.9827042],[5.0000758,51.9827448],[5.0003149,51.9828074],[5.0004977,51.9828887],[5.0006888,51.9829785],[5.0008675,51.9830936],[5.0016111,51.9836473],[5.0016826,51.9836837],[5.0017747,51.9837048],[5.0019699,51.9837361],[5.0027685,51.9838106],[5.0028221,51.9838013],[5.0028551,51.9837675],[5.0029183,51.9835304],[5.0030022,51.9834966],[5.0031575,51.9834788],[5.0034338,51.9834153],[5.0035754,51.9833679],[5.0039218,51.983213],[5.0042805,51.9830741],[5.0046778,51.9829835],[5.0049733,51.9828845],[5.0054777,51.9826661],[5.0057746,51.9825543],[5.0063011,51.9823977],[5.0066241,51.9823334],[5.0068935,51.9823164],[5.0073691,51.9823367],[5.0076055,51.9823901],[5.0078695,51.9825416],[5.0081444,51.9826915],[5.0082378,51.982716],[5.0085774,51.9827533],[5.0088426,51.9827719],[5.0090667,51.9827804],[5.0092756,51.982771],[5.0094172,51.9827346],[5.0096028,51.9826957],[5.0098694,51.9826711],[5.0101842,51.9826576],[5.0106103,51.9826424],[5.0110337,51.9825992],[5.011233,51.9825679],[5.0115986,51.9824756],[5.0119326,51.982462],[5.0123972,51.9824485],[5.0128082,51.9824502],[5.0133333,51.9824646],[5.0136165,51.9824891],[5.0139505,51.9825721],[5.0141635,51.9826407],[5.0143381,51.982727],[5.0143533,51.9828095],[5.014086,51.9830121],[5.014086,51.9830706],[5.0142991,51.9832213],[5.0145042,51.983369],[5.0147198,51.9835986],[5.014896,51.9839222],[5.0150652,51.9842304],[5.0153271,51.9844861],[5.0161204,51.9852379],[5.0164268,51.9855012],[5.0165875,51.9856458],[5.0166764,51.9857995],[5.0167036,51.9859654],[5.0166937,51.9864752],[5.0167003,51.9866122],[5.01683,51.9869093],[5.0169819,51.9872307],[5.0171289,51.9875073],[5.0172144,51.9876008],[5.0173504,51.987707],[5.0175212,51.987783],[5.0177078,51.9878365],[5.0179229,51.9878774],[5.0182313,51.9879154],[5.0185571,51.9879359],[5.0188276,51.9879446],[5.0191534,51.9879505],[5.0197591,51.9879261],[5.0202288,51.9878765],[5.0205784,51.9878287],[5.0209263,51.987783],[5.0211525,51.9877625],[5.0213945,51.9877586],[5.0218452,51.9877868],[5.0220824,51.9878044],[5.0224399,51.9878229],[5.0226913,51.987818],[5.0229349,51.9877966],[5.0232591,51.9877752],[5.0235723,51.9877557],[5.0237937,51.9877644],[5.0239867,51.9877937],[5.0241591,51.9878385],[5.0246414,51.9880128],[5.0249404,51.9881073],[5.0250969,51.9881433],[5.0252883,51.9881638],[5.0255508,51.9881589],[5.0258972,51.9881277],[5.0264033,51.9880742],[5.0267876,51.9880235],[5.0271119,51.9879544],[5.0274804,51.9878492],[5.027784,51.9877479],[5.0280102,51.9876563],[5.0282759,51.9875326],[5.0288421,51.9872531],[5.0290287,51.9871275],[5.0291758,51.9869891],[5.0296379,51.9865772],[5.0299864,51.98632],[5.030236,51.9861769],[5.0304262,51.9861343],[5.0308028,51.986137],[5.0309202,51.986142],[5.030988,51.9861134],[5.0310569,51.9860535],[5.031151,51.9860267],[5.0312658,51.9860333],[5.0316767,51.9861302],[5.0325578,51.986335],[5.0331791,51.986484],[5.0339062,51.9867583],[5.0346649,51.9871273],[5.0352464,51.9874727],[5.0354787,51.9876005],[5.035601,51.9876446],[5.0360917,51.9878875],[5.0365962,51.9882092],[5.0366993,51.9882481],[5.0368244,51.9882684],[5.0372079,51.9883057],[5.0374237,51.988298],[5.0377563,51.9883107],[5.0379955,51.988337],[5.0388147,51.9884563],[5.0392931,51.9885097],[5.0403528,51.9885672],[5.0405838,51.9885994],[5.0407528,51.9886485],[5.0409068,51.9887272],[5.0410539,51.9888533],[5.0411941,51.9890142],[5.0412889,51.9891293],[5.0413837,51.989197],[5.0419047,51.9894983],[5.0423432,51.9897413],[5.0428641,51.9900071],[5.0431033,51.9901188],[5.0433576,51.9902221],[5.0435665,51.9903329],[5.0437177,51.9904624],[5.0438071,51.9905505],[5.0440765,51.9906944],[5.0443486,51.9908425],[5.0449438,51.9911565],[5.0453177,51.9913715],[5.0463555,51.9919428],[5.0467486,51.9921612],[5.0470909,51.9923212],[5.0473617,51.9924371],[5.0476517,51.9925632],[5.0479486,51.9926826],[5.0481273,51.992763],[5.0484008,51.992912],[5.0488091,51.9932082],[5.049308,51.9936322],[5.0493493,51.9937016],[5.0494015,51.9938125],[5.049484,51.9939014],[5.049664,51.9940546],[5.0498221,51.994146],[5.0499953,51.9942416],[5.0501547,51.9942966],[5.0504599,51.9943533],[5.0507087,51.9944126],[5.0509011,51.9944634],[5.0511169,51.994537],[5.0512681,51.9945979],[5.0514771,51.994686],[5.0521616,51.9949873],[5.0525533,51.9951912],[5.0527636,51.9952302],[5.0530303,51.9953241],[5.053275,51.9954434],[5.0534111,51.9955298],[5.0535898,51.9956542],[5.0538317,51.9958514],[5.0541038,51.9961002],[5.0543241,51.9962744],[5.0543353,51.9963143],[5.0543089,51.9963587],[5.0541614,51.9964346],[5.0541535,51.9964654],[5.054221,51.9965202],[5.0542981,51.9965852],[5.0543668,51.9966891],[5.0544802,51.9969448],[5.0545216,51.9969632],[5.0602915,51.9967143],[5.0609917,51.9966852],[5.0621493,51.9966456],[5.0624038,51.9966442],[5.0625085,51.9966615],[5.0625648,51.9967233],[5.0625317,51.9972111],[5.0625587,51.9973037],[5.0623113,51.9974746],[5.0617367,51.9978859],[5.0614398,51.9980975],[5.0612707,51.9982498],[5.061125,51.9984529],[5.0610632,51.9986188],[5.0610343,51.9987906],[5.0610151,51.9989996],[5.0609917,51.9991486],[5.0609354,51.9993382],[5.0607484,51.9996521],[5.0605931,51.9998738],[5.0605092,52.0000059],[5.0604653,52.0001379],[5.0603457,52.0008216],[5.0603292,52.0011652],[5.060347,52.0017508],[5.0603415,52.0019133],[5.0603003,52.0021976],[5.0601807,52.0024853],[5.0601615,52.0025877],[5.0601793,52.0027324],[5.0602481,52.0029101],[5.060358,52.0030785],[5.0608972,52.0038559],[5.0611313,52.0041468],[5.0615394,52.0045514],[5.0618143,52.0047867],[5.0620226,52.0049321],[5.0622846,52.0050842],[5.062886,52.0054279],[5.0640867,52.0061485],[5.064253,52.0062536],[5.0645107,52.0064382],[5.0647087,52.0065249],[5.0649408,52.0065952],[5.0651044,52.0066595],[5.0653325,52.0067644],[5.0656693,52.006926],[5.0659181,52.0070208],[5.0663085,52.0071198],[5.0665985,52.0071722],[5.0670026,52.0072298],[5.0673792,52.0072653],[5.0676748,52.0073059],[5.0678493,52.0073567],[5.0682122,52.0075107],[5.0685627,52.0076858],[5.0688789,52.0078694],[5.0691139,52.0080277],[5.0698328,52.0085599],[5.0698939,52.008592],[5.0699613,52.0085991],[5.070017,52.0085794],[5.0705723,52.0082553],[5.0706727,52.0082163],[5.0707895,52.0081842],[5.0709187,52.0081656],[5.0712156,52.0081495],[5.0714259,52.0081343],[5.0720321,52.0080429],[5.0722342,52.0079887],[5.0723634,52.0079507],[5.0724884,52.0079261],[5.073331,52.0079033],[5.0735029,52.0079752],[5.0735139,52.0080031],[5.0733132,52.0083737],[5.0727935,52.0091918],[5.0724735,52.0097709],[5.0721771,52.0102917],[5.0717604,52.0110783],[5.0697958,52.0145406],[5.0692488,52.0154535],[5.0691213,52.0157013],[5.0689985,52.0160091],[5.0689737,52.0161512],[5.0690191,52.0163145],[5.0692857,52.0166715],[5.0693517,52.0168102],[5.0693696,52.0169261],[5.0693352,52.0171376],[5.0692569,52.017355],[5.068982,52.0180114],[5.0688802,52.018096],[5.0680954,52.0183084],[5.0677559,52.0183879],[5.0674067,52.0184471],[5.0662902,52.0185401],[5.0656759,52.0185744],[5.0652184,52.0185797],[5.0643808,52.0185401],[5.0637902,52.0184753],[5.0633585,52.0183669],[5.0632051,52.0183302],[5.06306,52.0183061],[5.0624653,52.0181663],[5.0622755,52.018129],[5.0617931,52.0180833],[5.0614962,52.0180867],[5.0610082,52.0181366],[5.0604982,52.0182145],[5.0602398,52.0182678],[5.0598866,52.0183574],[5.0593065,52.0185334],[5.0580932,52.0189458],[5.0578011,52.0190378],[5.0571264,52.0192305],[5.0560549,52.019531],[5.055711,52.0196095],[5.0555473,52.0196317],[5.0554101,52.019636],[5.0552262,52.0196279],[5.0550872,52.0196203],[5.0549641,52.0195997],[5.0547054,52.0195218],[5.0544855,52.0194346],[5.0540668,52.0192581],[5.0538081,52.0191504],[5.0533765,52.0189889],[5.0529501,52.0188845],[5.0528355,52.0188702],[5.0524339,52.0188606],[5.0522397,52.0188712],[5.0518349,52.0189453],[5.0515509,52.0190383],[5.0514734,52.0190429],[5.0512322,52.0189503],[5.050922,52.0189642],[5.0508048,52.0189228],[5.0463526,52.0162227],[5.046195,52.0160881],[5.0461069,52.0159676],[5.0460644,52.0159068],[5.0459961,52.0158853],[5.0457212,52.0159152],[5.0454601,52.0159694],[5.0450987,52.016104],[5.0438765,52.0166441],[5.0430445,52.0169917],[5.0427393,52.0170711],[5.0424144,52.017144],[5.0421441,52.0172244],[5.0416188,52.0174411],[5.0411685,52.017676]
          ]
        }
      }],
      "style": {
          "color": "#0000ff", // Blue
          "weight": 5,
          "opacity": 0.65
      }
    }
  };
  
var markersGroup;

function addMarkers(routeKey) {
    var markersData = {
	   "5km": [
			{ "label": "S&F", "coordinates": [52.01767595036597, 5.041168514980346] },
			{ "label": "1", "coordinates": [52.01396120072222, 5.0537408025271064] },
			{ "label": "2", "coordinates": [52.010398748100975, 5.060117969484494] },
			{ "label": "3", "coordinates": [52.01638504679818, 5.061840235241116] },
			{ "label": "4", "coordinates": [52.01886991392945, 5.052825221008217] }
		],
		"10km": [
			{ "label": "S&F", "coordinates": [52.01767595036597, 5.041168514980346] },
			{ "label": "1", "coordinates": [52.01752909054323, 5.052259664212811] },
			{ "label": "2", "coordinates": [52.012618571745534, 5.053906258243513] },
			{ "label": "3", "coordinates": [52.00453234453684, 5.049965208567216] },
			{ "label": "4", "coordinates": [51.99663726562462, 5.053757963765956] },
			{ "label": "5", "coordinates": [51.99947543771909, 5.060853610840883] },
			{ "label": "6", "coordinates": [52.00699960986297, 5.065862506980861] },
			{ "label": "7", "coordinates": [52.01124788370882, 5.071664224992353] },
			{ "label": "8", "coordinates": [52.01854680297298, 5.066170049402961] },
			{ "label": "9", "coordinates": [52.01886513730737, 5.052625162226604] }
		],
		"HalveMarathon": [
			{ "label": "S", "coordinates": [52.018392804054784, 5.037845905715988] },
			{ "label": "1", "coordinates": [52.01458608904785, 5.025803824987579] },
			{ "label": "2", "coordinates": [52.01229693149967, 5.011718844417971] },
			{ "label": "3", "coordinates": [52.01026846014216, 4.9975779091132555] },
			{ "label": "4", "coordinates": [52.00957126320578, 4.983078889345515] },
			{ "label": "5", "coordinates": [52.00704997712382, 4.969105898092492] },
			{ "label": "6", "coordinates": [52.00110214736615, 4.965226767248479] },
			{ "label": "7", "coordinates": [51.9929260123204, 4.969424143226754] },
			{ "label": "8", "coordinates": [51.98458590284257, 4.97460351756826] },
			{ "label": "9", "coordinates": [51.98131363384705, 4.983446241194436] },
			{ "label": "10", "coordinates": [51.98425635326064, 4.996612611351911] },
			{ "label": "11", "coordinates": [51.98273947725674, 5.008451659364103] },
			{ "label": "12", "coordinates": [51.98741510102341, 5.0170799105117325] },
			{ "label": "13", "coordinates": [51.986335909452556, 5.02996482766685] },
			{ "label": "14", "coordinates": [51.9897151793626, 5.042296089598696] },
			{ "label": "15", "coordinates": [51.99543252265494, 5.053252574337556] },
			{ "label": "16", "coordinates": [51.998515375622, 5.061101758511437] },
			{ "label": "17", "coordinates": [52.00646544828658, 5.064572877319287] },
			{ "label": "18", "coordinates": [52.010353110592945, 5.072144593313924] },
			{ "label": "19", "coordinates": [52.01840706311327, 5.067642709991884] },
			{ "label": "20", "coordinates": [52.019207466175274, 5.053945127906406] },
			{ "label": "21", "coordinates": [52.017171079267854, 5.042323288402085] },
			{ "label": "F", "coordinates": [52.017675950365984, 5.041168514980372] }
        ]
    };

    // Clear existing markers
    if (markersGroup) {
        markersGroup.clearLayers();
    } else {
        markersGroup = L.layerGroup().addTo(map);
    }


    // Add new markers for the selected route
    markersData[routeKey].forEach(function(marker) {
			var icon = L.divIcon({
            className: 'text-label', // Define this class in your CSS
            html: marker.label,
            iconSize: [20, 20] // Adjust based on your label size
        });
        L.marker(marker.coordinates, { icon: icon }).addTo(markersGroup);
    });
}

	function changeRoute(routeKey) {
    if (currentLayer) {
      map.removeLayer(currentLayer); // Remove the current layer
    }
    var routeData = routesData[routeKey];
    if (routeData) {
      currentLayer = L.geoJson(routeData, {
        style: routeData.style,
        onEachFeature: function (feature, layer) {
          if (feature.properties && feature.properties.name) {
            layer.bindPopup(feature.properties.name);
          }
        }
      }).addTo(map);
      map.fitBounds(currentLayer.getBounds()); // Adjust map view to fit the route
	  addMarkers(routeKey);
    }
	addWaterStationsForDistance(routeKey);
	}
	function addWaterStationsForDistance(currentDistance) {
		// Clear existing water stations
		waterStationsLayer.clearLayers();

		var alwaysAvailableIcon = L.divIcon({ className: 'water-station-always', html: 'ð§', iconSize: [20, 20] });
		var warmWeatherIcon = L.divIcon({
			className: 'water-station-warm',
			html: '<span class="icon-sun">âï¸</span><span class="icon-drop">ð§</span>',
			iconSize: [30, 30], // Adjust as needed
			iconAnchor: [15, 30] // Adjust anchor to align properly
		});

		waterStationsData.filter(function(station) {
			return station.distances.includes(currentDistance);
		}).forEach(function(station) {
			var icon = station.warmWeatherOnly ? warmWeatherIcon : alwaysAvailableIcon;
			L.marker(station.coordinates, { icon: icon })
			 .bindPopup(station.label)
			 .addTo(waterStationsLayer); // Add to the layer group
    });
}
  
  
  changeRoute('HalveMarathon');
  document.getElementById('btn5km').addEventListener('click', function() { changeRoute('5km'); });
  document.getElementById('btn10km').addEventListener('click', function() { changeRoute('10km'); });
  document.getElementById('btnHalveMarathon').addEventListener('click', function() { changeRoute('HalveMarathon'); });
</script>

</body>
</html>
